<?xml version="1.0" encoding="UTF-8"?>

<!--
	@package xpotronix
	@version 2.0 - Areco 
	@copyright Copyright &copy; 2003-2011, Eduardo Spotorno
	@author Eduardo Spotorno
 
	Licensed under GPL v3
	@license http://www.gnu.org/licenses/gpl-3.0.txt
-->

<model>

	<!-- Usuarios del Sistema -->

	<table name="users" translate="Usuarios del Sistema" dbi="default-acl"><!--{{{-->
		<panel type="xpGrid"/>
		<panel type="xpForm" display="hide"/>

		<table name="user_preferences" translate="Preferencias del Usuario">
			<panel type="xpGrid"/>
			<foreign_key type="wired"><ref local="user_id" remote="user_id"/></foreign_key>
		</table>

		<table name="audit" translate="Auditoria de Acceso">
			<panel type="xpGrid"/>
			<panel type="xpForm" display="disabled"/>
			<foreign_key type="wired"><ref local="user_id" remote="user_id"/></foreign_key>
		</table>

		<table name="sessions" translate="Sesiones del Usuario">
			<panel type="xpGrid"/>
			<foreign_key type="wired"><ref local="user_id" remote="user_id"/></foreign_key>
		</table>

		<table name="gacl_aro" translate="Usuario en ACL">
			<panel type="xpGrid"/>
			<foreign_key type="wired"><ref local="name" remote="user_username"/></foreign_key>

			<table name="gacl_groups_aro_map" translate="Permisos por Grupos de Roles">
				<panel type="xpGrid"/>
				<foreign_key type="wired"><ref local="aro_id" remote="id"/></foreign_key>
				<feat><hide_fk type="bool">true</hide_fk><hide_pk type="bool">false</hide_pk></feat>
			</table>

			<table name="gacl_aro_map" translate="Permisos del Usuario">
				<panel type="xpGrid"/>
				<foreign_key type="wired"><ref local="value" remote="value"/></foreign_key>
				<feat><hide_fk type="bool">true</hide_fk><hide_pk type="bool">false</hide_pk></feat>
			</table>

		</table>


		<field name="user_contact" translate="Contacto"/>
		<field name="user_username" translate="Usuario"/>
		<field name="user_password" translate="Clave"/>

 	</table><!--}}}-->

	<table name="user_preferences" dbi="default-acl"><!--{{{-->
		<panel type="xpGrid"/>

		<field name="id"/>
		<field name="user_id" match_type="exact" translate="Usuario" eh="user_id"/>
		<field name="var_name" translate="Variable"/>
		<field name="var_value" translate="Valor"/>

	</table><!--}}}-->

</model>
